<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>–¢–æ—á–Ω—ã–π —Ä–∞—Å—á—ë—Ç —Ä–µ–º–æ–Ω—Ç–∞ ‚Äî FinishPerfekt</title>
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
  <style>
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      background: #f9f9f9;
      padding: 16px;
      margin: 0;
      color: #333;
    }
    .card {
      background: white;
      border-radius: 16px;
      padding: 20px;
      margin: 12px 0;
      box-shadow: 0 2px 8px rgba(0,0,0,0.08);
    }
    h2 {
      font-size: 20px;
      margin: 0 0 16px;
    }
    label {
      display: block;
      margin: 12px 0 6px;
      font-weight: 600;
    }
    input, select {
      width: 100%;
      padding: 12px;
      border: 1px solid #ddd;
      border-radius: 10px;
      font-size: 16px;
      box-sizing: border-box;
    }
    .checkbox-group {
      display: flex;
      flex-wrap: wrap;
      gap: 12px;
      margin-top: 8px;
    }
    .checkbox-item {
      flex: 1 1 45%;
      min-width: 140px;
    }
    .checkbox-item label {
      margin: 0;
      font-weight: normal;
      display: flex;
      align-items: center;
      cursor: pointer;
    }
    .checkbox-item input[type="checkbox"] {
      width: auto;
      margin-right: 8px;
    }
    .checkbox-item input[type="number"] {
      margin-top: 4px;
      width: 80px;
      display: block;
    }
    #result {
      font-size: 18px;
      font-weight: bold;
      color: #0088cc;
      margin: 16px 0;
      padding: 12px;
      background: #eef7ff;
      border-radius: 10px;
    }
    button {
      background: #0088cc;
      color: white;
      border: none;
      padding: 16px;
      border-radius: 12px;
      font-size: 18px;
      width: 100%;
      font-weight: 600;
      margin-top: 10px;
    }
    .btn-contact {
      background: #25D366;
      margin-top: 10px;
    }
    .section {
      border-top: 1px solid #eee;
      padding-top: 16px;
    }
    .section-title {
      font-weight: bold;
      margin: 16px 0 8px;
      color: #333;
    }
    .price-note {
      font-size: 12px;
      color: #666;
      margin-top: 2px;
    }
  </style>
</head>
<body>
  <div class="card">
    <h2>üßÆ –¢–æ—á–Ω—ã–π —Ä–∞—Å—á—ë—Ç —Ä–µ–º–æ–Ω—Ç–∞</h2>

    <label>–ü–ª–æ—â–∞–¥—å –∫–≤–∞—Ä—Ç–∏—Ä—ã (–º¬≤):</label>
    <input type="number" id="area" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: 52" min="20" max="200" value="52">

    <label>–¢–∏–ø —Ä–µ–º–æ–Ω—Ç–∞:</label>
    <select id="repairType">
      <option value="cosmetic">–ö–æ—Å–º–µ—Ç–∏—á–µ—Å–∫–∏–π</option>
      <option value="capital" selected>–ö–∞–ø–∏—Ç–∞–ª—å–Ω—ã–π</option>
      <option value="euro">–ï–≤—Ä–æ / –î–∏–∑–∞–π–Ω–µ—Ä—Å–∫–∏–π</option>
    </select>

    <div id="works"></div>

    <div id="result">–°–º–µ—Ç–∞ –ø–æ—è–≤–∏—Ç—Å—è –∑–¥–µ—Å—å</div>

    <button onclick="sendData()">–û—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–º–µ—Ç—É –º–µ–Ω–µ–¥–∂–µ—Ä—É</button>
    <button class="btn-contact" onclick="callManager()">
      üìû –°–≤—è–∑–∞—Ç—å—Å—è —Å –º–µ–Ω–µ–¥–∂–µ—Ä–æ–º
    </button>
  </div>

  <script>
    // === –°–ú–ï–¢–ê: 80 –ø–æ–ø—É–ª—è—Ä–Ω—ã—Ö —Ä–∞–±–æ—Ç —Å –õ–£–ß–®–ò–ú–ò —Ü–µ–Ω–∞–º–∏ –∏–∑ 8 –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ ===
    const WORKS_DATA = {
      "–î–µ–º–æ–Ω—Ç–∞–∂–Ω—ã–µ —Ä–∞–±–æ—Ç—ã": [
        { "name": "–û—á–∏—Å—Ç–∫–∞ —Å—Ç–µ–Ω –æ—Ç –æ–±–æ–µ–≤", "unit": "–º¬≤", "price": 80 },
        { "name": "–î–µ–º–æ–Ω—Ç–∞–∂ —à—Ç—É–∫–∞—Ç—É—Ä–∫–∏ —Å–æ —Å—Ç–µ–Ω", "unit": "–º¬≤", "price": 135 },
        { "name": "–î–µ–º–æ–Ω—Ç–∞–∂ –ø–ª–∏—Ç–∫–∏ —Å–æ —Å—Ç–µ–Ω", "unit": "–º¬≤", "price": 150 },
        { "name": "–û—á–∏—Å—Ç–∫–∞ —Å—Ç–µ–Ω –æ—Ç –∫—Ä–∞—Å–∫–∏, —à–ø–∞—Ç–ª—ë–≤–∫–∏, –ø–æ–±–µ–ª–∫–∏", "unit": "–º¬≤", "price": 150 },
        { "name": "–î–µ–º–æ–Ω—Ç–∞–∂ –ª–∞–º–∏–Ω–∞—Ç–∞", "unit": "–º¬≤", "price": 60 },
        { "name": "–î–µ–º–æ–Ω—Ç–∞–∂ –ø–∞—Ä–∫–µ—Ç–Ω–æ–π –¥–æ—Å–∫–∏", "unit": "–º¬≤", "price": 60 },
        { "name": "–î–µ–º–æ–Ω—Ç–∞–∂ –ª–∏–Ω–æ–ª–µ—É–º–∞", "unit": "–º¬≤", "price": 60 },
        { "name": "–î–µ–º–æ–Ω—Ç–∞–∂ —Å—Ç—è–∂–∫–∏ (–¥–æ 5 —Å–º)", "unit": "–º¬≤", "price": 180 },
        { "name": "–î–µ–º–æ–Ω—Ç–∞–∂ –ø–µ—Ä–µ–≥–æ—Ä–æ–¥–æ–∫ –∏–∑ –ì–ö–õ", "unit": "–º¬≤", "price": 160 },
        { "name": "–î–µ–º–æ–Ω—Ç–∞–∂ —É–Ω–∏—Ç–∞–∑–∞", "unit": "—à—Ç", "price": 300 },
        { "name": "–î–µ–º–æ–Ω—Ç–∞–∂ –≤–∞–Ω–Ω—ã", "unit": "—à—Ç", "price": 500 },
        { "name": "–î–µ–º–æ–Ω—Ç–∞–∂ —Å–º–µ—Å–∏—Ç–µ–ª—è", "unit": "—à—Ç", "price": 150 }
      ],
      "–®—Ç—É–∫–∞—Ç—É—Ä–Ω—ã–µ —Ä–∞–±–æ—Ç—ã": [
        { "name": "–ì—Ä—É–Ω—Ç–æ–≤–∫–∞ —Å—Ç–µ–Ω", "unit": "–º¬≤", "price": 40 },
        { "name": "–û–±—Ä–∞–±–æ—Ç–∫–∞ –±–µ—Ç–æ–Ω–æ–∫–æ–Ω—Ç–∞–∫—Ç–æ–º", "unit": "–º¬≤", "price": 50 },
        { "name": "–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –º–∞—è–∫–æ–≤", "unit": "–º.–ø.", "price": 80 },
        { "name": "–®—Ç—É–∫–∞—Ç—É—Ä–∫–∞ —Å—Ç–µ–Ω –ø–æ –º–∞—è–∫–∞–º", "unit": "–º¬≤", "price": 400 },
        { "name": "–®–ø–∞—Ç–ª–µ–≤–∫–∞ —Å—Ç–µ–Ω –ø–æ–¥ –æ–±–æ–∏", "unit": "–º¬≤", "price": 200 },
        { "name": "–®–ø–∞—Ç–ª–µ–≤–∫–∞ —Å—Ç–µ–Ω –ø–æ–¥ –ø–æ–∫—Ä–∞—Å–∫—É", "unit": "–º¬≤", "price": 250 },
        { "name": "–®–ª–∏—Ñ–æ–≤–∫–∞ —Å—Ç–µ–Ω –ø–æ–¥ –ø–æ–∫—Ä–∞—Å–∫—É", "unit": "–º¬≤", "price": 50 }
      ],
      "–ú–∞–ª—è—Ä–Ω—ã–µ —Ä–∞–±–æ—Ç—ã": [
        { "name": "–ü–æ–∫–ª–µ–π–∫–∞ –æ–±–æ–µ–≤ –±–µ–∑ –ø–æ–¥–±–æ—Ä–∞ —Ä–∏—Å—É–Ω–∫–∞", "unit": "–º¬≤", "price": 200 },
        { "name": "–ü–æ–∫–ª–µ–π–∫–∞ –æ–±–æ–µ–≤ —Å –ø–æ–¥–±–æ—Ä–æ–º —Ä–∏—Å—É–Ω–∫–∞", "unit": "–º¬≤", "price": 250 },
        { "name": "–ü–æ–∫—Ä–∞—Å–∫–∞ —Å—Ç–µ–Ω (2 —Å–ª–æ—è)", "unit": "–º¬≤", "price": 220 },
        { "name": "–ü–æ–∫—Ä–∞—Å–∫–∞ –ø–æ—Ç–æ–ª–∫–∞ (2 —Å–ª–æ—è)", "unit": "–º¬≤", "price": 250 },
        { "name": "–ù–∞–Ω–µ—Å–µ–Ω–∏–µ –¥–µ–∫–æ—Ä–∞—Ç–∏–≤–Ω–æ–π —à—Ç—É–∫–∞—Ç—É—Ä–∫–∏", "unit": "–º¬≤", "price": 500 }
      ],
      "–ü–ª–∏—Ç–æ—á–Ω—ã–µ —Ä–∞–±–æ—Ç—ã": [
        { "name": "–£–∫–ª–∞–¥–∫–∞ –∫–µ—Ä–∞–º–∏—á–µ—Å–∫–æ–π –ø–ª–∏—Ç–∫–∏ –Ω–∞ —Å—Ç–µ–Ω—ã", "unit": "–º¬≤", "price": 1000 },
        { "name": "–£–∫–ª–∞–¥–∫–∞ –∫–µ—Ä–∞–º–∏—á–µ—Å–∫–æ–π –ø–ª–∏—Ç–∫–∏ –Ω–∞ –ø–æ–ª", "unit": "–º¬≤", "price": 1000 },
        { "name": "–£–∫–ª–∞–¥–∫–∞ –∫–µ—Ä–∞–º–æ–≥—Ä–∞–Ω–∏—Ç–∞ –Ω–∞ –ø–æ–ª", "unit": "–º¬≤", "price": 1200 },
        { "name": "–ó–∞—Ç–∏—Ä–∫–∞ —à–≤–æ–≤ –ø–ª–∏—Ç–∫–∏", "unit": "–º¬≤", "price": 150 },
        { "name": "–ì–∏–¥—Ä–æ–∏–∑–æ–ª—è—Ü–∏—è –ø–æ–ª–∞", "unit": "–º¬≤", "price": 80 }
      ],
      "–ù–∞–ø–æ–ª—å–Ω—ã–µ —Ä–∞–±–æ—Ç—ã": [
        { "name": "–£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ —Å—Ç—è–∂–∫–∏ –ø–æ–ª–∞ (–¥–æ 5 —Å–º)", "unit": "–º¬≤", "price": 400 },
        { "name": "–í—ã—Ä–∞–≤–Ω–∏–≤–∞–Ω–∏–µ –ø–æ–ª–∞ —Å–∞–º–æ–Ω–∏–≤–µ–ª–∏—Ä–æ–º", "unit": "–º¬≤", "price": 250 },
        { "name": "–£–∫–ª–∞–¥–∫–∞ –ª–∞–º–∏–Ω–∞—Ç–∞", "unit": "–º¬≤", "price": 400 },
        { "name": "–£–∫–ª–∞–¥–∫–∞ –ø–∞—Ä–∫–µ—Ç–Ω–æ–π –¥–æ—Å–∫–∏", "unit": "–º¬≤", "price": 600 },
        { "name": "–£–∫–ª–∞–¥–∫–∞ –ª–∏–Ω–æ–ª–µ—É–º–∞", "unit": "–º¬≤", "price": 250 },
        { "name": "–£–∫–ª–∞–¥–∫–∞ –∫–≤–∞—Ä—Ü–≤–∏–Ω–∏–ª–∞", "unit": "–º¬≤", "price": 380 },
        { "name": "–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –Ω–∞–ø–æ–ª—å–Ω–æ–≥–æ –ø–ª–∏–Ω—Ç—É—Å–∞ (–ø–ª–∞—Å—Ç–∏–∫)", "unit": "–º.–ø.", "price": 100 }
      ],
      "–ü–æ—Ç–æ–ª–æ—á–Ω—ã–µ —Ä–∞–±–æ—Ç—ã": [
        { "name": "–®–ø–∞—Ç–ª–µ–≤–∫–∞ –ø–æ—Ç–æ–ª–∫–∞ –ø–æ–¥ –ø–æ–∫—Ä–∞—Å–∫—É", "unit": "–º¬≤", "price": 350 },
        { "name": "–ü–æ–∫—Ä–∞—Å–∫–∞ –ø–æ—Ç–æ–ª–∫–∞", "unit": "–º¬≤", "price": 250 },
        { "name": "–ú–æ–Ω—Ç–∞–∂ –ì–ö–õ –Ω–∞ –ø–æ—Ç–æ–ª–æ–∫ (1 —É—Ä–æ–≤–µ–Ω—å)", "unit": "–º¬≤", "price": 700 },
        { "name": "–ú–æ–Ω—Ç–∞–∂ –ì–ö–õ –Ω–∞ –ø–æ—Ç–æ–ª–æ–∫ (2 —É—Ä–æ–≤–Ω—è)", "unit": "–º¬≤", "price": 1000 },
        { "name": "–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –Ω–∞—Ç—è–∂–Ω–æ–≥–æ –ø–æ—Ç–æ–ª–∫–∞", "unit": "–º¬≤", "price": 450 }
      ],
      "–°–∞–Ω—Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —Ä–∞–±–æ—Ç—ã": [
        { "name": "–ü—Ä–æ–∫–ª–∞–¥–∫–∞ —Ç—Ä—É–± –≤–æ–¥–æ—Å–Ω–∞–±–∂–µ–Ω–∏—è (–º–µ—Ç–∞–ª–ª–æ–ø–ª–∞—Å—Ç–∏–∫)", "unit": "–º.–ø.", "price": 70 },
        { "name": "–ü—Ä–æ–∫–ª–∞–¥–∫–∞ –∫–∞–Ω–∞–ª–∏–∑–∞—Ü–∏–æ–Ω–Ω—ã—Ö —Ç—Ä—É–±", "unit": "–º..p.", "price": 70 },
        { "name": "–£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å–º–µ—Å–∏—Ç–µ–ª—è", "unit": "—à—Ç", "price": 300 },
        { "name": "–£—Å—Ç–∞–Ω–æ–≤–∫–∞ —É–Ω–∏—Ç–∞–∑–∞ –Ω–∞–ø–æ–ª—å–Ω–æ–≥–æ", "unit": "—à—Ç", "price": 1000 },
        { "name": "–£—Å—Ç–∞–Ω–æ–≤–∫–∞ —É–Ω–∏—Ç–∞–∑–∞ –ø–æ–¥–≤–µ—Å–Ω–æ–≥–æ", "unit": "—à—Ç", "price": 1500 },
        { "name": "–£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Ä–∞–∫–æ–≤–∏–Ω—ã", "unit": "—à—Ç", "price": 800 },
        { "name": "–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –≤–∞–Ω–Ω—ã", "unit": "—à—Ç", "price": 1200 },
        { "name": "–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –¥—É—à–µ–≤–æ–π –∫–∞–±–∏–Ω—ã", "unit": "—à—Ç", "price": 2500 },
        { "name": "–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø–æ–ª–æ—Ç–µ–Ω—Ü–µ—Å—É—à–∏—Ç–µ–ª—è", "unit": "—à—Ç", "price": 800 },
        { "name": "–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –≤–æ–¥–æ–Ω–∞–≥—Ä–µ–≤–∞—Ç–µ–ª—è", "unit": "—à—Ç", "price": 1000 },
        { "name": "–ú–æ–Ω—Ç–∞–∂ —Å–∞–Ω—Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–≥–æ –ª—é–∫–∞", "unit": "—à—Ç", "price": 250 }
      ],
      "–≠–ª–µ–∫—Ç—Ä–æ–º–æ–Ω—Ç–∞–∂–Ω—ã–µ —Ä–∞–±–æ—Ç—ã": [
        { "name": "–®—Ç—Ä–æ–±–ª–µ–Ω–∏–µ –≤ –∫–∏—Ä–ø–∏—á–µ", "unit": "–º.–ø.", "price": 100 },
        { "name": "–®—Ç—Ä–æ–±–ª–µ–Ω–∏–µ –≤ –±–µ—Ç–æ–Ω–µ", "unit": "–º.–ø.", "price": 180 },
        { "name": "–ü—Ä–æ–∫–ª–∞–¥–∫–∞ –∫–∞–±–µ–ª—è 3√ó1.5 / 3√ó2.5", "unit": "–º.–ø.", "price": 60 },
        { "name": "–ú–æ–Ω—Ç–∞–∂ —Ä–æ–∑–µ—Ç–∫–∏ / –≤—ã–∫–ª—é—á–∞—Ç–µ–ª—è", "unit": "—à—Ç", "price": 150 },
        { "name": "–ú–æ–Ω—Ç–∞–∂ –ª—é—Å—Ç—Ä—ã", "unit": "—à—Ç", "price": 500 },
        { "name": "–ú–æ–Ω—Ç–∞–∂ —Ç–æ—á–µ—á–Ω–æ–≥–æ —Å–≤–µ—Ç–∏–ª—å–Ω–∏–∫–∞", "unit": "—à—Ç", "price": 250 },
        { "name": "–ú–æ–Ω—Ç–∞–∂ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–∏—Ç–µ–ª—å–Ω–æ–≥–æ —â–∏—Ç–∞ (–¥–æ 24 –º–æ–¥)", "unit": "—à—Ç", "price": 2000 }
      ],
      "–ü–µ—Ä–µ–≥–æ—Ä–æ–¥–∫–∏": [
        { "name": "–ú–æ–Ω—Ç–∞–∂ –ø–µ—Ä–µ–≥–æ—Ä–æ–¥–∫–∏ –∏–∑ –ì–ö–õ (1 —Å–ª–æ–π)", "unit": "–º¬≤", "price": 500 },
        { "name": "–ú–æ–Ω—Ç–∞–∂ –ø–µ—Ä–µ–≥–æ—Ä–æ–¥–∫–∏ –∏–∑ –ì–ö–õ (2 —Å–ª–æ—è)", "unit": "–º¬≤", "price": 600 },
        { "name": "–ú–æ–Ω—Ç–∞–∂ –ø–µ—Ä–µ–≥–æ—Ä–æ–¥–∫–∏ –∏–∑ –∫–∏—Ä–ø–∏—á–∞ (1/2)", "unit": "–º¬≤", "price": 700 }
      ],
      "–î–≤–µ—Ä–∏ –∏ –æ–∫–Ω–∞": [
        { "name": "–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –º–µ–∂–∫–æ–º–Ω–∞—Ç–Ω–æ–π –¥–≤–µ—Ä–∏ (—Å—Ç–∞–Ω–¥–∞—Ä—Ç)", "unit": "—à—Ç", "price": 3000 },
        { "name": "–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø–æ–¥–æ–∫–æ–Ω–Ω–∏–∫–∞", "unit": "–º.–ø.", "price": 350 },
        { "name": "–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ü–í–• –æ—Ç–∫–æ—Å–æ–≤", "unit": "–º.–ø.", "price": 380 }
      ],
      "–ü—Ä–æ—á–∏–µ —Ä–∞–±–æ—Ç—ã": [
        { "name": "–û–±—à–∏–≤–∫–∞ —Å—Ç–µ–Ω –≤–∞–≥–æ–Ω–∫–æ–π", "unit": "–º¬≤", "price": 450 },
        { "name": "–û–±—à–∏–≤–∫–∞ —Å—Ç–µ–Ω –ü–í–• –ø–∞–Ω–µ–ª—è–º–∏", "unit": "–º¬≤", "price": 300 },
        { "name": "–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–µ—Ä–∫–∞–ª–∞", "unit": "—à—Ç", "price": 350 },
        { "name": "–£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –∞—Ä–∫–∏ –∏–∑ –ì–ö–õ", "unit": "—à—Ç", "price": 3000 },
        { "name": "–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ë—Ä–∞", "unit": "—à—Ç", "price": 500 },
        { "name": "–ú–æ–Ω—Ç–∞–∂ –≤–µ–Ω—Ç–∏–ª—è—Ü–∏–æ–Ω–Ω–æ–π —Ä–µ—à—ë—Ç–∫–∏", "unit": "—à—Ç", "price": 250 },
        { "name": "–£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å—Ç–∏—Ä–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω—ã", "unit": "—à—Ç", "price": 1000 },
        { "name": "–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø–æ—Å—É–¥–æ–º–æ–µ—á–Ω–æ–π –º–∞—à–∏–Ω—ã", "unit": "—à—Ç", "price": 1000 },
        { "name": "–£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Ç–µ—Ä–º–æ—Ä–µ–≥—É–ª—è—Ç–æ—Ä–∞ (—Ç—ë–ø–ª—ã–π –ø–æ–ª)", "unit": "—à—Ç", "price": 650 },
        { "name": "–£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å–≤–µ—Ç–æ–¥–∏–æ–¥–Ω–æ–π –ª–µ–Ω—Ç—ã", "unit": "–º.–ø.", "price": 250 },
        { "name": "–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –≥–∞—Ä–¥–∏–Ω—ã", "unit": "—à—Ç", "price": 300 },
        { "name": "–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø–æ–¥–≤–µ—Å–Ω–æ–≥–æ —Å–≤–µ—Ç–∏–ª—å–Ω–∏–∫–∞", "unit": "—à—Ç", "price": 500 },
        { "name": "–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –Ω–∞—Å—Ç–µ–Ω–Ω–æ–≥–æ —Å–≤–µ—Ç–∏–ª—å–Ω–∏–∫–∞", "unit": "—à—Ç", "price": 500 }
      ]
    };

    let currentQuantities = {};

    // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
    function renderWorks() {
      const area = parseFloat(document.getElementById("area").value) || 50;
      let html = '';

      Object.keys(WORKS_DATA).forEach(section => {
        html += `<div class="section"><div class="section-title">üß± ${section}</div><div class="checkbox-group">`;

        WORKS_DATA[section].forEach((item, idx) => {
          const key = `${section}_${idx}`.replace(/\s+/g, '_').toLowerCase();
          const isSquare = item.unit === "–º¬≤";
          const qty = isSquare ? Math.round(area * 0.8) : 1;

          html += `
            <div class="checkbox-item">
              <label>
                <input type="checkbox" id="work_${key}" onchange="toggleWork('${key}', this.checked, ${item.price}, '${item.unit}')">
                ${item.name}
              </label>
              <div class="price-note">${item.price} ‚ÇΩ / ${item.unit}</div>
              ${isSquare ? `<input type="number" id="qty_${key}" value="${qty}" min="0" onchange="updateQty('${key}', this.value)">` : ''}
            </div>
          `;
        });

        html += '</div></div>';
      });

      document.getElementById("works").innerHTML = html;
      calculate();
    }

    function toggleWork(key, checked, price, unit) {
      const qtyInput = document.getElementById(`qty_${key}`);
      if (checked) {
        const area = parseFloat(document.getElementById("area").value) || 50;
        const qty = (unit === "–º¬≤") ? Math.round(area * 0.8) : 1;
        currentQuantities[key] = { qty, price, unit };
        if (qtyInput) qtyInput.value = qty;
      } else {
        currentQuantities[key] = { qty: 0, price, unit };
        if (qtyInput) qtyInput.value = 0;
      }
      calculate();
    }

    function updateQty(key, value) {
      const qty = parseFloat(value) || 0;
      if (currentQuantities[key]) {
        currentQuantities[key].qty = qty;
      }
      calculate();
    }

    function calculate() {
      let total = 0;
      Object.values(currentQuantities).forEach(item => {
        if (item.qty > 0) {
          total += item.qty * item.price;
        }
      });
      const formatted = new Intl.NumberFormat('ru-RU').format(total);
      document.getElementById("result").innerText = `–ò—Ç–æ–≥–æ: ${formatted} ‚ÇΩ`;
    }

    function sendData() {
      const total = 0;
      const details = [];
      Object.entries(currentQuantities).forEach(([key, item]) => {
        if (item.qty > 0) {
          // –ò–∑–≤–ª–µ–∫–∞–µ–º –∏–º—è –∏–∑ DOM –∏–ª–∏ –∫–ª—é—á–∞
          const label = document.querySelector(`label[for="work_${key}"]`);
          const name = label ? label.textContent.trim().replace(/\s*\d+ ‚ÇΩ.*$/, '') : key;
          details.push({ name, qty: item.qty, unit: item.unit, price: item.price, total: item.qty * item.price });
        }
      });

      if (details.length === 0) {
        alert("–í—ã–±–µ—Ä–∏—Ç–µ —Ö–æ—Ç—è –±—ã –æ–¥–Ω—É —Ä–∞–±–æ—Ç—É.");
        return;
      }

      let totalSum = details.reduce((sum, d) => sum + d.total, 0);
      const data = {
        area: parseFloat(document.getElementById("area").value) || 0,
        repairType: document.getElementById("repairType").value,
        total: totalSum,
        details: details
      };

      const WebApp = window.Telegram.WebApp;
      WebApp.sendData(JSON.stringify(data));
      WebApp.close();
    }

    function callManager() {
      window.Telegram.WebApp.openTelegramLink("https://t.me/grigorii_saveliev");
    }

    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
    document.getElementById("area").addEventListener("input", renderWorks);
    document.getElementById("repairType").addEventListener("change", renderWorks);
    renderWorks();
  </script>
</body>
</html>