<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –£—é—Ç–§–∏–Ω–∞–ª</title>
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <style>
    :root { 
        --primary: #d35400; 
        --primary-light: #edbb99;
        --bg: #fdf6f0; 
        --card-bg: #ffffff; 
        --text: #2c3e50; 
    }
    body { font-family: 'Inter', sans-serif; background: var(--bg); padding: 12px; margin: 0; color: var(--text); -webkit-tap-highlight-color: transparent; }
    .card { background: var(--card-bg); border-radius: 20px; padding: 20px; box-shadow: 0 4px 20px rgba(0,0,0,0.08); }
    h2 { font-size: 20px; text-align: center; margin: 0 0 15px; }
    
    /* Inputs */
    label { display: block; margin: 12px 0 6px; font-weight: 600; font-size: 14px; }
    input, select { width: 100%; padding: 12px; border: 1px solid #e0e0e0; border-radius: 12px; font-size: 16px; box-sizing: border-box; outline: none; transition: 0.2s; }
    input:focus, select:focus { border-color: var(--primary); }
    
    /* Main Tabs */
    .tabs-wrapper { overflow-x: auto; white-space: nowrap; margin: 15px -10px; padding: 0 10px; -ms-overflow-style: none; scrollbar-width: none; }
    .tabs-wrapper::-webkit-scrollbar { display: none; }
    .tab-buttons { display: inline-flex; gap: 8px; }
    .tab-button { padding: 10px 16px; background: #f0f2f5; border-radius: 12px; cursor: pointer; font-weight: 600; font-size: 13px; color: #7f8c8d; transition: 0.2s; border: 1px solid transparent; }
    .tab-button.active { background: var(--primary); color: white; box-shadow: 0 4px 10px rgba(211, 84, 0, 0.3); }

    /* Sub Tabs (–ü–æ–¥–≥—Ä—É–ø–ø—ã) */
    .sub-tabs-container { display: flex; flex-wrap: wrap; gap: 6px; margin-bottom: 15px; padding: 10px; background: #fffcf5; border-radius: 12px; border: 1px dashed #e0e0e0; }
    .sub-tab-btn { flex: 1 1 auto; text-align: center; padding: 8px 12px; font-size: 12px; border-radius: 8px; border: 1px solid #e0e0e0; background: white; color: #555; cursor: pointer; font-weight: 500; }
    .sub-tab-btn.active { background: var(--primary-light); color: #6e2c00; border-color: var(--primary-light); font-weight: 700; }

    /* List Items */
    .checkbox-item { display: grid; grid-template-columns: 1fr 90px; gap: 10px; align-items: center; padding: 12px 0; border-bottom: 1px solid #f0f0f0; }
    .checkbox-row { display: flex; align-items: flex-start; gap: 10px; cursor: pointer; }
    .work-name { font-size: 14px; line-height: 1.4; }
    .price-note { font-size: 12px; color: #95a5a6; margin-top: 4px; margin-left: 32px; }
    input[type="checkbox"] { width: 20px; height: 20px; accent-color: var(--primary); flex-shrink: 0; margin-top: 2px; }
    
    /* Quantity Input */
    .qty-input-wrapper { display: flex; align-items: center; gap: 5px; justify-content: flex-end; }
    .qty-input-wrapper input { width: 60px; padding: 8px; text-align: center; font-weight: 600; }
    .unit-label { font-size: 12px; color: #95a5a6; width: 25px; }

    /* Footer */
    #result { font-size: 22px; font-weight: 800; color: var(--primary); text-align: center; margin: 25px 0; padding: 15px; background: #fff8e1; border-radius: 16px; border: 2px solid #fcebb6; }
    button { background: var(--primary); color: white; border: none; padding: 16px; border-radius: 14px; font-size: 16px; width: 100%; font-weight: 700; cursor: pointer; margin-bottom: 10px; box-shadow: 0 4px 15px rgba(211, 84, 0, 0.4); }
    .btn-contact { background: white; color: var(--text); border: 2px solid #e0e0e0; box-shadow: none; }
  </style>
</head>
<body>
  <div class="card">
    <h2 id="title">–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä 2026</h2>
    
    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 12px;">
        <div>
            <label>–ü–ª–æ—â–∞–¥—å (–º¬≤):</label> 
            <input type="number" id="area" placeholder="0" inputmode="numeric">
        </div>
        <div>
            <label>–ö–æ–º–Ω–∞—Ç—ã:</label>
            <select id="rooms">
                <option value="1">1-–∫</option><option value="2">2-–∫</option>
                <option value="3">3-–∫</option><option value="4+">4+</option>
            </select>
        </div>
    </div>

    <div style="margin: 15px 0; display:flex; align-items:center; gap:10px; background: #f8f9fa; padding: 10px; border-radius: 10px;">
      <input type="checkbox" id="isKotedge" style="width: 20px; height: 20px;"> 
      <label for="isKotedge" style="margin:0; font-weight: 500;">–ß–∞—Å—Ç–Ω—ã–π –¥–æ–º / –ö–æ—Ç—Ç–µ–¥–∂</label>
    </div>

    <div class="tabs-wrapper">
        <div class="tab-buttons" id="tabs"></div>
    </div>

    <div id="sub-tabs-area" class="sub-tabs-container" style="display: none;"></div>

    <div id="works"></div>
    <div id="result">0 ‚ÇΩ</div>

    <label>–ê–¥—Ä–µ—Å –æ–±—ä–µ–∫—Ç–∞:</label>
    <input type="text" id="address" placeholder="–£–ª–∏—Ü–∞, –¥–æ–º">

    <label style="color: var(--primary);">–¢–µ–ª–µ—Ñ–æ–Ω:</label>
    <input type="tel" id="phone" placeholder="+7 (___) ___-__-__">

    <button onclick="sendData()">üì§ –û—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–º–µ—Ç—É</button>
    <button class="btn-contact" onclick="callMaster()">üìû –ù–∞–ø–∏—Å–∞—Ç—å –º–∞—Å—Ç–µ—Ä—É</button>
  </div>

  <script>
    const tg = window.Telegram.WebApp;
    tg.ready();
    tg.expand();

    // ================== –î–ê–ù–ù–´–ï –°–ú–ï–¢–´ ==================
    // –°—Ç—Ä—É–∫—Ç—É—Ä–∞: –ö–∞—Ç–µ–≥–æ—Ä–∏—è -> –ü–æ–¥–≥—Ä—É–ø–ø–∞ -> –°–ø–∏—Å–æ–∫ —Ä–∞–±–æ—Ç
    // –ï—Å–ª–∏ –ø–æ–¥–≥—Ä—É–ø–ø –Ω–µ—Ç, –∏—Å–ø–æ–ª—å–∑—É–µ–º "–û–±—â–∏–µ —Ä–∞–±–æ—Ç—ã"
    
    const WORKS_DATA = {
      "–î–µ–º–æ–Ω—Ç–∞–∂–Ω—ã–µ —Ä–∞–±–æ—Ç—ã": {
        "–°—Ç–µ–Ω—ã": [
            {name: "–£–¥–∞–ª–µ–Ω–∏–µ —Å—Ç–∞—Ä—ã—Ö —Å—Ç–µ–Ω –∏–∑ –±–µ—Ç–æ–Ω–∞", unit: "–º¬≤", price: 5500},
            {name: "–î–µ–º–æ–Ω—Ç–∞–∂ –±–µ—Ç–æ–Ω–Ω–æ–π —Å—Ç–µ–Ω—ã –¥–æ 20 —Å–º", unit: "–º¬≤", price: 3500},
            {name: "–î–µ–º–æ–Ω—Ç–∞–∂ —Å—Ç–µ–Ω—ã –∫–∏—Ä–ø–∏—á–Ω–æ–π –¥–æ 60 —Å–º", unit: "–º¬≤", price: 2700},
            {name: "–°–Ω–æ—Å —Å—Ç–µ–Ω –∏–∑ —Å–∏–±–∏—Ç–∞", unit: "–º¬≤", price: 450},
            {name: "–ü—Ä–æ–±–∏–≤–∫–∞ –ø—Ä–æ–µ–º–∞ –≤ —Å—Ç–µ–Ω–µ (–±–µ—Ç–æ–Ω)", unit: "—à—Ç", price: 17000},
            {name: "–ü—Ä–æ–±–∏–≤–∫–∞ –¥–≤–µ—Ä–Ω—ã—Ö –ø—Ä–æ—Ö–æ–¥–æ–≤ (–±–µ—Ç–æ–Ω)", unit: "—à—Ç", price: 15000},
            {name: "–†–µ–∑–∫–∞ –¥–≤–µ—Ä–Ω–æ–≥–æ –ø—Ä–æ–µ–º–∞ (–∫–∏—Ä–ø–∏—á)", unit: "—à—Ç", price: 5500},
            {name: "–î–µ–º–æ–Ω—Ç–∞–∂ —Å—É—Ö–æ–π —à—Ç—É–∫–∞—Ç—É—Ä–∫–∏", unit: "–º¬≤", price: 550},
            {name: "–°–Ω—è—Ç–∏–µ —Å—Ç–∞—Ä–æ–π –ø–ª–∏—Ç–∫–∏ —Å–æ —Å—Ç–µ–Ω", unit: "–º¬≤", price: 500},
            {name: "–°–Ω—è—Ç–∏–µ –ø–æ–±–µ–ª–∫–∏ / –Ω–∞–±–µ–ª–∞", unit: "–º¬≤", price: 850},
            {name: "–£–¥–∞–ª–µ–Ω–∏–µ —Å—Ç–∞—Ä—ã—Ö –æ–±–æ–µ–≤", unit: "–º¬≤", price: 180},
            {name: "–î–µ–º–æ–Ω—Ç–∞–∂ –æ–±—à–∏–≤–∫–∏ (–≤–∞–≥–æ–Ω–∫–∞, –ü–í–•)", unit: "–º¬≤", price: 350},
            {name: "–î–µ–º–æ–Ω—Ç–∞–∂ –ø–µ—Ä–µ–≥–æ—Ä–æ–¥–æ–∫ –∏–∑ –ì–ö–õ", unit: "–º¬≤", price: 500},
            {name: "–°–Ω—è—Ç–∏–µ –≤–∫–ª–µ–µ–Ω–æ–≥–æ –∑–µ—Ä–∫–∞–ª–∞", unit: "–º¬≤", price: 275}
        ],
        "–ü–æ–ª": [
            {name: "–î–µ–º–æ–Ω—Ç–∞–∂ –ø–æ–ª–∞ (–±–µ—Ç–æ–Ω –¥–æ 10 —Å–º)", unit: "–º¬≤", price: 10800},
            {name: "–î–µ–º–æ–Ω—Ç–∞–∂ –ø–æ–ª–∞ –ø–æ–¥ —Å–∞–Ω—Ç–µ—Ö–∫–∞–±–∏–Ω–æ–π", unit: "–º¬≤", price: 3000},
            {name: "–î–µ–º–æ–Ω—Ç–∞–∂ —Å—Ç—è–∂–∫–∏", unit: "–º¬≤", price: 2500},
            {name: "–î–µ–º–æ–Ω—Ç–∞–∂ –ª–∏–Ω–æ–ª–µ—É–º–∞, –∫–æ–≤—Ä–æ–ª–∏–Ω–∞", unit: "–º¬≤", price: 1350},
            {name: "–†–∞–∑–±–æ—Ä–∫–∞ –¥–µ—Ä–µ–≤—è–Ω–Ω–æ–≥–æ –ø–æ–ª–∞", unit: "–º¬≤", price: 750},
            {name: "–°–Ω—è—Ç–∏–µ –ø–∞—Ä–∫–µ—Ç–∞", unit: "–º.–ø.", price: 400},
            {name: "–î–µ–º–æ–Ω—Ç–∞–∂ –ø–ª–∏—Ç–∫–∏ –Ω–∞ –ø–æ–ª—É", unit: "–º¬≤", price: 300},
            {name: "–î–µ–º–æ–Ω—Ç–∞–∂ –ø–ª–∏–Ω—Ç—É—Å–∞", unit: "–º.–ø.", price: 100}
        ],
        "–ü–æ—Ç–æ–ª–æ–∫": [
            {name: "–û—á–∏—Å—Ç–∫–∞ –ø–æ—Ç–æ–ª–∫–∞ –æ—Ç –æ–±–æ–µ–≤", unit: "–º¬≤", price: 1500},
            {name: "–†–∞–∑–±–æ—Ä–∫–∞ –ø–æ—Ç–æ–ª–∫–∞ –∏–∑ –ì–ö–õ", unit: "–º¬≤", price: 600},
            {name: "–°–Ω—è—Ç–∏–µ –Ω–∞–±–µ–ª–∞ —Å –ø–æ—Ç–æ–ª–∫–∞", unit: "–º¬≤", price: 300},
            {name: "–î–µ–º–æ–Ω—Ç–∞–∂ –ø–æ–¥–≤–µ—Å–Ω—ã—Ö –ø–æ—Ç–æ–ª–∫–æ–≤", unit: "–º¬≤", price: 350},
            {name: "–î–µ–º–æ–Ω—Ç–∞–∂ –ª–µ–ø–Ω–∏–Ω—ã/–ø–ª–∏–Ω—Ç—É—Å–∞", unit: "–º.–ø.", price: 100}
        ]
      },
      "–ü–æ—Ç–æ–ª–æ–∫ (–ú–æ–Ω—Ç–∞–∂)": {
        "–®—Ç—É–∫–∞—Ç—É—Ä–∫–∞ –∏ –ø–æ–∫—Ä–∞—Å–∫–∞": [
            {name: "–®—Ç—É–∫–∞—Ç—É—Ä–∫–∞ –ø–æ—Ç–æ–ª–∫–∞ –ø–æ –º–∞—è–∫–∞–º", unit: "–º¬≤", price: 1900},
            {name: "–®–ø–∞–∫–ª–µ–≤–∫–∞ –ø–æ—Ç–æ–ª–∫–∞ (—à–∏—Ç—Ä–æ–∫/—Ñ–∏–Ω–∏—à)", unit: "–º¬≤", price: 1100},
            {name: "–ü–æ–∫—Ä–∞—Å–∫–∞ –ø–æ—Ç–æ–ª–∫–∞", unit: "–º¬≤", price: 640},
            {name: "–ü–æ–∫–ª–µ–π–∫–∞ —Å—Ç–µ–∫–ª–æ—Ö–æ–ª—Å—Ç–∞", unit: "–º¬≤", price: 490},
            {name: "–ì—Ä—É–Ω—Ç–æ–≤–∫–∞ –ø–æ—Ç–æ–ª–∫–∞", unit: "–º¬≤", price: 150},
            {name: "–ó–∞–¥–µ–ª–∫–∞ —à–≤–æ–≤ (—Ä—É—Å—Ç–æ–≤)", unit: "–º.–ø.", price: 400}
        ],
        "–ì–ö–õ –∏ —Å–∏—Å—Ç–µ–º—ã": [
            {name: "–ü–æ—Ç–æ–ª–æ–∫ –∏–∑ –ì–ö–õ (3 —É—Ä–æ–≤–Ω—è)", unit: "–º¬≤", price: 2500},
            {name: "–ü–æ—Ç–æ–ª–æ–∫ –∏–∑ –ì–ö–õ (2 —É—Ä–æ–≤–Ω—è)", unit: "–º¬≤", price: 2100},
            {name: "–ü–æ—Ç–æ–ª–æ–∫ –∏–∑ –ì–ö–õ (1 —É—Ä–æ–≤–µ–Ω—å)", unit: "–º¬≤", price: 1900},
            {name: "–ú–æ–Ω—Ç–∞–∂ —Ñ–∏–≥—É—Ä–Ω–æ–≥–æ –ø–æ—Ç–æ–ª–∫–∞ –ì–ö–õ", unit: "–º¬≤", price: 1450},
            {name: "–ü–æ—Ä—Ç–∞–ª –ø–æ–ª—É–∫—Ä—É–≥–ª–æ–π —Ñ–æ—Ä–º—ã", unit: "–º.–ø.", price: 1650},
            {name: "–ú–æ–Ω—Ç–∞–∂ —Ä–µ–µ—á–Ω–æ–≥–æ –ø–æ—Ç–æ–ª–∫–∞", unit: "–º¬≤", price: 900},
            {name: "–ü–æ—Ç–æ–ª–æ–∫ –∏–∑ –ø–∞–Ω–µ–ª–µ–π –ü–í–•/–ú–î–§", unit: "–º¬≤", price: 700},
            {name: "–ú–æ–Ω—Ç–∞–∂ –ø–æ—Ç–æ–ª–∫–∞ –ê—Ä–º—Å—Ç—Ä–æ–Ω–≥", unit: "–º¬≤", price: 500}
        ]
      },
      "–°—Ç–µ–Ω—ã (–ú–æ–Ω—Ç–∞–∂)": {
        "–ü–µ—Ä–µ–≥–æ—Ä–æ–¥–∫–∏": [
            {name: "–í–æ–∑–≤–µ–¥–µ–Ω–∏–µ –ø–µ—Ä–µ–≥–æ—Ä–æ–¥–æ–∫ (–∫–∏—Ä–ø–∏—á)", unit: "–º¬≤", price: 3100},
            {name: "–í–æ–∑–≤–µ–¥–µ–Ω–∏–µ –ø–µ—Ä–µ–≥–æ—Ä–æ–¥–æ–∫ (—Å–∏–±–∏—Ç)", unit: "–º¬≤", price: 2300},
            {name: "–ü–µ—Ä–µ–≥–æ—Ä–æ–¥–∫–∏ –∏–∑ —Å—Ç–µ–∫–ª–æ–±–ª–æ–∫–æ–≤", unit: "–º¬≤", price: 2000},
            {name: "–ü–µ—Ä–µ–≥–æ—Ä–æ–¥–∫–∏ –∏–∑ –ì–ö–õ (—Å–ª–æ–∂–Ω—ã–µ)", unit: "–º¬≤", price: 1750},
            {name: "–ú–æ–Ω—Ç–∞–∂ –∫–æ—Ä–æ–±–∞ –∏–∑ –ì–ö–õ", unit: "—à—Ç", price: 2500},
            {name: "–ú–æ–Ω—Ç–∞–∂ –æ—Ç–∫–æ—Å–æ–≤ –ì–ö–õ/–ü–í–•", unit: "–º.–ø.", price: 950},
            {name: "–§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–≤–µ—Ä–Ω–æ–≥–æ –ø—Ä–æ—ë–º–∞", unit: "—à—Ç", price: 17000}
        ],
        "–í—ã—Ä–∞–≤–Ω–∏–≤–∞–Ω–∏–µ": [
            {name: "–®—Ç—É–∫–∞—Ç—É—Ä–∫–∞ —Å—Ç–µ–Ω –ø–æ –º–∞—è–∫–∞–º", unit: "–º¬≤", price: 970},
            {name: "–ù–∞–Ω–µ—Å–µ–Ω–∏–µ —Ñ–∞–∫—Ç—É—Ä–Ω–æ–π —à—Ç—É–∫–∞—Ç—É—Ä–∫–∏", unit: "–º¬≤", price: 1800},
            {name: "–í–µ–Ω–µ—Ü–∏–∞–Ω—Å–∫–∞—è —à—Ç—É–∫–∞—Ç—É—Ä–∫–∞", unit: "–º¬≤", price: 1400},
            {name: "–®–ø–∞–∫–ª–µ–≤–∫–∞ —Å—Ç–µ–Ω –ø–æ–¥ –ø–æ–∫—Ä–∞—Å–∫—É", unit: "–º¬≤", price: 520},
            {name: "–®–ø–∞–∫–ª–µ–≤–∫–∞ —Å—Ç–µ–Ω –ø–æ–¥ –æ–±–æ–∏", unit: "–º¬≤", price: 470},
            {name: "–ê—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ç–µ–Ω —Å–µ—Ç–∫–æ–π", unit: "–º¬≤", price: 450},
            {name: "–ì—Ä—É–Ω—Ç–æ–≤–∫–∞ —Å—Ç–µ–Ω", unit: "–º¬≤", price: 120}
        ],
        "–§–∏–Ω–∏—à–Ω–∞—è –æ—Ç–¥–µ–ª–∫–∞": [
            {name: "–û–±–ª–∏—Ü–æ–≤–∫–∞ –º–æ–∑–∞–∏–∫–æ–π / –∫–∞–º–Ω–µ–º", unit: "–º¬≤", price: 6500},
            {name: "–ü–ª–∏—Ç–∫–∞ –ø–æ–¥ –∫–∏—Ä–ø–∏—á/–∫–∞–º–µ–Ω—å", unit: "–º¬≤", price: 3500},
            {name: "–£–∫–ª–∞–¥–∫–∞ –∫–µ—Ä–∞–º–æ–≥—Ä–∞–Ω–∏—Ç–∞ (—Å—Ç–µ–Ω—ã)", unit: "–º¬≤", price: 3500},
            {name: "–û–±–ª–∏—Ü–æ–≤–∫–∞ –ø—Ä–æ–±–∫–æ–π", unit: "–º¬≤", price: 1000},
            {name: "–ú–æ–Ω—Ç–∞–∂ –¥–µ–∫–æ—Ä. —Ä–µ–µ–∫", unit: "–º¬≤", price: 950},
            {name: "–ü–æ–∫–ª–µ–π–∫–∞ –æ–±–æ–µ–≤", unit: "–º¬≤", price: 650},
            {name: "–ü–æ–∫–ª–µ–π–∫–∞ –æ–±–æ–µ–≤ —Å –ø–æ–¥–±–æ—Ä–æ–º", unit: "–º¬≤", price: 900},
            {name: "–ü–æ–∫–ª–µ–π–∫–∞ —Ñ–æ—Ç–æ–æ–±–æ–µ–≤", unit: "–º¬≤", price: 1200},
            {name: "–ü–æ–∫—Ä–∞—Å–∫–∞ —Å—Ç–µ–Ω", unit: "–º¬≤", price: 520},
            {name: "–ú–æ–Ω—Ç–∞–∂ –ø–∞–Ω–µ–ª–µ–π –ú–î–§/–ü–ª–∞—Å—Ç–∏–∫", unit: "–º¬≤", price: 700}
        ]
      },
      "–ü–æ–ª (–ú–æ–Ω—Ç–∞–∂)": {
        "–°—Ç—è–∂–∫–∞": [
            {name: "–°—Ç—è–∂–∫–∞ –ø–æ–ª–∞ –ø–æ –º–∞—è–∫–∞–º", unit: "–º¬≤", price: 1300},
            {name: "–°—É—Ö–∏–µ –ø–æ–ª—ã (–ö–Ω–∞—É—Ñ)", unit: "–º¬≤", price: 650},
            {name: "–ù–∞–ª–∏–≤–Ω–æ–π –ø–æ–ª", unit: "–º¬≤", price: 850},
            {name: "–ê—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ç—è–∂–∫–∏ —Å–µ—Ç–∫–æ–π", unit: "–º¬≤", price: 450},
            {name: "–ì–∏–¥—Ä–æ–∏–∑–æ–ª—è—Ü–∏—è –ø–æ–ª–∞", unit: "–º¬≤", price: 550},
            {name: "–ú–æ–Ω—Ç–∞–∂ —Ñ–∞–Ω–µ—Ä—ã –Ω–∞ –ª–∞–≥–∏", unit: "–º¬≤", price: 1000}
        ],
        "–ü–æ–∫—Ä—ã—Ç–∏—è": [
            {name: "–£–∫–ª–∞–¥–∫–∞ –ø–∞—Ä–∫–µ—Ç–Ω–æ–π –¥–æ—Å–∫–∏", unit: "–º¬≤", price: 3500},
            {name: "–£–∫–ª–∞–¥–∫–∞ —à—Ç—É—á–Ω–æ–≥–æ –ø–∞—Ä–∫–µ—Ç–∞", unit: "–º¬≤", price: 1700},
            {name: "–£–∫–ª–∞–¥–∫–∞ –∫–µ—Ä–∞–º–æ–≥—Ä–∞–Ω–∏—Ç–∞", unit: "–º¬≤", price: 2900},
            {name: "–£–∫–ª–∞–¥–∫–∞ –º–æ–∑–∞–∏–∫–∏", unit: "–º¬≤", price: 6500},
            {name: "–û–±–ª–∏—Ü–æ–≤–∫–∞ –∫–∞–º–Ω–µ–º", unit: "–º¬≤", price: 5500},
            {name: "–õ–∞–º–∏–Ω–∞—Ç / –ö–≤–∞—Ä—Ü–≤–∏–Ω–∏–ª", unit: "–º¬≤", price: 980},
            {name: "–õ–∏–Ω–æ–ª–µ—É–º / –ö–æ–≤—Ä–æ–ª–∏–Ω (–∫–ª–µ–π)", unit: "–º¬≤", price: 650},
            {name: "–£–∫–ª–∞–¥–∫–∞ –ø–ª–∏—Ç–∫–∏ –ü–í–•", unit: "–º¬≤", price: 630}
        ],
        "–ü–ª–∏–Ω—Ç—É—Å–∞": [
            {name: "–ú–æ–Ω—Ç–∞–∂ —Ç–µ–ø–ª–æ–≥–æ –ø–ª–∏–Ω—Ç—É—Å–∞", unit: "–º.–ø.", price: 2000},
            {name: "–ú–æ–Ω—Ç–∞–∂ —Ç–µ–Ω–µ–≤–æ–≥–æ –ø–ª–∏–Ω—Ç—É—Å–∞", unit: "–º.–ø.", price: 1150},
            {name: "–ú–æ–Ω—Ç–∞–∂ —Å–∫—Ä—ã—Ç–æ–≥–æ –ø–ª–∏–Ω—Ç—É—Å–∞", unit: "–º.–ø.", price: 1000},
            {name: "–ü–ª–∏–Ω—Ç—É—Å (–∫–µ—Ä–∞–º–∏–∫–∞/–¥—é—Ä–æ–ø–æ–ª–∏–º–µ—Ä)", unit: "–º.–ø.", price: 950},
            {name: "–ú–æ–Ω—Ç–∞–∂ –ø–ª–∏–Ω—Ç—É—Å–∞ –ú–î–§", unit: "–º.–ø.", price: 950},
            {name: "–ò–∑–≥–æ—Ç–æ–≤–ª–µ–Ω–∏–µ –ø–æ—Ä–æ–≥–∞ –∏–∑ –∫–∞—Ñ–µ–ª—è", unit: "–º¬≤", price: 2000}
        ]
      },
      "–≠–ª–µ–∫—Ç—Ä–∏–∫–∞": {
        "–û—Å–Ω–æ–≤–Ω—ã–µ —Ä–∞–±–æ—Ç—ã": [
            {name: "–ú–æ–Ω—Ç–∞–∂ —Å–≤–µ—Ç–æ–≤–æ–π –ª–∏–Ω–∏–∏", unit: "–º.–ø.", price: 1500},
            {name: "–ú–æ–Ω—Ç–∞–∂ —Ç—Ä–µ–∫–æ–≤–æ–π –ª–∏–Ω–∏–∏", unit: "–º.–ø.", price: 2000},
            {name: "–ú–æ–Ω—Ç–∞–∂ —â–∏—Ç–∞ (–≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π)", unit: "–æ—Ç", price: 15000},
            {name: "–°–±–æ—Ä–∫–∞ —ç–ª–µ–∫—Ç—Ä–æ—â–∏—Ç–∞", unit: "—à—Ç", price: 6000},
            {name: "–®—Ç—Ä–æ–±–ª–µ–Ω–∏–µ —Å—Ç–µ–Ω (–º–æ–Ω–æ–ª–∏—Ç)", unit: "–º.–ø.", price: 850},
            {name: "–ú–æ–Ω—Ç–∞–∂ —Ç–µ–ø–ª–æ–≥–æ –ø–æ–ª–∞ (—ç–ª–µ–∫—Ç—Ä–æ)", unit: "–º¬≤", price: 800},
            {name: "–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ª—é—Å—Ç—Ä—ã", unit: "—à—Ç", price: 1500},
            {name: "–ú–æ–Ω—Ç–∞–∂ –±—Ä–∞ / —Å–≤–µ—Ç–∏–ª—å–Ω–∏–∫–æ–≤", unit: "—à—Ç", price: 950},
            {name: "–ú–æ–Ω—Ç–∞–∂ —Ç–æ—á–µ—á–Ω–æ–≥–æ —Å–≤–µ—Ç–∏–ª—å–Ω–∏–∫–∞", unit: "—à—Ç", price: 650},
            {name: "–ú–æ–Ω—Ç–∞–∂ —Ä–æ–∑–µ—Ç–∫–∏ 380 –í", unit: "—à—Ç", price: 600},
            {name: "–ú–æ–Ω—Ç–∞–∂ –≤—ã–∫–ª—é—á–∞—Ç–µ–ª—è/—Ä–æ–∑–µ—Ç–∫–∏", unit: "—à—Ç", price: 350},
            {name: "–ú–æ–Ω—Ç–∞–∂ –ø–æ–¥—Ä–æ–∑–µ—Ç–Ω–∏–∫–∞ (–±–µ—Ç–æ–Ω)", unit: "—à—Ç", price: 650},
            {name: "–ü—Ä–æ–∫–ª–∞–¥–∫–∞ –∫–∞–±–µ–ª—è", unit: "–º.–ø.", price: 210},
            {name: "–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –≤–∏–¥–µ–æ–¥–æ–º–æ—Ñ–æ–Ω–∞", unit: "—à—Ç", price: 600},
            {name: "–¢–µ—Ä–º–æ—Ä–µ–≥—É–ª—è—Ç–æ—Ä —Ç–µ–ø–ª–æ–≥–æ –ø–æ–ª–∞", unit: "—à—Ç", price: 1450}
        ]
      },
      "–°–∞–Ω—Ç–µ—Ö–Ω–∏–∫–∞": {
        "–û—Å–Ω–æ–≤–Ω—ã–µ —Ä–∞–±–æ—Ç—ã": [
            {name: "–ò–Ω–∂–µ–Ω–µ—Ä–Ω—ã–µ —Å–µ—Ç–∏ (–∫–æ–º–ø–ª–µ–∫—Å)", unit: "–æ—Ç", price: 45000},
            {name: "–°–∏—Å—Ç–µ–º–∞ –æ—á–∏—Å—Ç–∫–∏ –≤–æ–¥—ã", unit: "–æ—Ç", price: 25000},
            {name: "–î—É—à–µ–≤–æ–π –ø–æ–¥–¥–æ–Ω (–±–µ—Ç–æ–Ω)", unit: "–æ—Ç", price: 25000},
            {name: "–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –¥—É—à–µ–≤–æ–π –∫–∞–±–∏–Ω—ã", unit: "—à—Ç", price: 8500},
            {name: "–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –≤–∞–Ω–Ω—ã", unit: "—à—Ç", price: 8000},
            {name: "–ó–∞–º–µ–Ω–∞ —Ä–∞–¥–∏–∞—Ç–æ—Ä–∞ (—Å–≤–∞—Ä–∫–∞)", unit: "—à—Ç", price: 4000},
            {name: "–£—Å—Ç–∞–Ω–æ–≤–∫–∞ —É–Ω–∏—Ç–∞–∑–∞ / –±–∏–¥–µ", unit: "—à—Ç", price: 4900},
            {name: "–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏–Ω—Å—Ç–∞–ª–ª—è—Ü–∏–∏", unit: "—à—Ç", price: 4500},
            {name: "–ü–æ–ª–æ—Ç–µ–Ω—Ü–µ—Å—É—à–∏—Ç–µ–ª—å/–í–æ–¥–æ–Ω–∞–≥—Ä–µ–≤–∞—Ç–µ–ª—å", unit: "—à—Ç", price: 3500},
            {name: "–£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Ä–∞–∫–æ–≤–∏–Ω—ã", unit: "—à—Ç", price: 2500},
            {name: "–ú–æ–Ω—Ç–∞–∂ —Å–º–µ—Å–∏—Ç–µ–ª—è", unit: "—à—Ç", price: 2000},
            {name: "–°–∏—Å—Ç–µ–º–∞ –∑–∞—â–∏—Ç—ã –æ—Ç –ø—Ä–æ—Ç–µ—á–µ–∫", unit: "–æ—Ç", price: 16000},
            {name: "–†–∞–∑–≤–æ–¥–∫–∞ —Ç—Ä—É–± (–∫–æ–º–ø–ª–µ–∫—Å)", unit: "–æ—Ç", price: 12000},
            {name: "–õ—é–∫ —Å–∫—Ä—ã—Ç–æ–≥–æ –º–æ–Ω—Ç–∞–∂–∞", unit: "–æ—Ç", price: 4000}
        ]
      },
      "–î–≤–µ—Ä–∏ –∏ –ü—Ä–æ—á–µ–µ": {
        "–û—Å–Ω–æ–≤–Ω—ã–µ —Ä–∞–±–æ—Ç—ã": [
            {name: "–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –º–µ–∂–∫–æ–º–Ω. –¥–≤–µ—Ä–µ–π", unit: "–æ—Ç", price: 3550},
            {name: "–ú–æ–Ω—Ç–∞–∂ —Å—Ç–æ–ª–µ—à–Ω–∏—Ü—ã (–±–µ—Ç–æ–Ω)", unit: "–º¬≤", price: 12500},
            {name: "–ü–æ–∫—Ä–∞—Å–∫–∞ –¥–≤–µ—Ä–µ–π", unit: "—à—Ç", price: 2100},
            {name: "–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø–æ–¥–æ–∫–æ–Ω–Ω–∏–∫–∞", unit: "—à—Ç", price: 2500},
            {name: "–ú–æ–Ω—Ç–∞–∂ –æ—Ç–∫–æ—Å–æ–≤ (–ø–æ—Ä—Ç–∞–ª)", unit: "–∫–æ–º–ø–ª", price: 2500}
        ]
      },
      "–ü—Ä–æ—á–∏–µ —Ä–∞–±–æ—Ç—ã": {
        "–†–∞–∑–Ω–æ–µ": [
            {name: "–†–∞–¥–∏–∞—Ç–æ—Ä—ã (–º–æ–Ω—Ç–∞–∂)", unit: "—à—Ç", price: 1700},
            {name: "–ó–µ—Ä–∫–∞–ª–æ", unit: "—à—Ç", price: 2500},
            {name: "–ú–∞–≥–∞–∑–∏–Ω (–¥–æ—Å—Ç–∞–≤–∫–∞/–ø–æ–¥—ä–µ–º)", unit: "—à—Ç", price: 30000},
            {name: "–í—ã–≤–æ–∑ –º—É—Å–æ—Ä–∞", unit: "—à—Ç", price: 7000}
        ]
      }
    };

    // –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è
    let currentQuantities = {};
    let activeSection = Object.keys(WORKS_DATA)[0];
    let activeSubSection = Object.keys(WORKS_DATA[activeSection])[0];

    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
    const tabsContainer = document.getElementById("tabs");
    const subTabsContainer = document.getElementById("sub-tabs-area");

    // –†–µ–Ω–¥–µ—Ä –ì–ª–∞–≤–Ω—ã—Ö –≤–∫–ª–∞–¥–æ–∫
    Object.keys(WORKS_DATA).forEach(secName => {
        const btn = document.createElement("div");
        btn.className = `tab-button ${secName === activeSection ? 'active' : ''}`;
        btn.innerText = secName.replace(" (–ú–æ–Ω—Ç–∞–∂)", "").replace(" —Ä–∞–±–æ—Ç—ã", "");
        btn.onclick = () => switchSection(secName, btn);
        tabsContainer.appendChild(btn);
    });

    renderSubTabs();
    renderWorks();

    function switchSection(sectionName, btn) {
        // –°–º–µ–Ω–∞ –∞–∫—Ç–∏–≤–Ω–æ–≥–æ –∫–ª–∞—Å—Å–∞
        document.querySelectorAll('.tab-button').forEach(b => b.classList.remove('active'));
        btn.classList.add('active');
        
        activeSection = sectionName;
        // –ü—Ä–∏ —Å–º–µ–Ω–µ —Ä–∞–∑–¥–µ–ª–∞ –≤—ã–±–∏—Ä–∞–µ–º –ø–µ—Ä–≤—É—é –ø–æ–¥–≥—Ä—É–ø–ø—É
        activeSubSection = Object.keys(WORKS_DATA[sectionName])[0];
        
        renderSubTabs();
        renderWorks();
    }

    function renderSubTabs() {
        subTabsContainer.innerHTML = '';
        const subGroups = Object.keys(WORKS_DATA[activeSection]);
        
        // –ï—Å–ª–∏ –ø–æ–¥–≥—Ä—É–ø–ø–∞ —Ç–æ–ª—å–∫–æ –æ–¥–Ω–∞ –∏ –æ–Ω–∞ –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è "–û—Å–Ω–æ–≤–Ω—ã–µ —Ä–∞–±–æ—Ç—ã" –∏–ª–∏ "–†–∞–∑–Ω–æ–µ", –º–æ–∂–Ω–æ —Å–∫—Ä—ã—Ç—å, 
        // –Ω–æ –¥–ª—è –µ–¥–∏–Ω–æ–æ–±—Ä–∞–∑–∏—è –æ—Å—Ç–∞–≤–∏–º –∏–ª–∏ —Å–∫—Ä–æ–µ–º.
        // –ó–¥–µ—Å—å: –≤—Å–µ–≥–¥–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ–º, —á—Ç–æ–±—ã –±—ã–ª–æ –ø–æ–Ω—è—Ç–Ω–æ.
        
        subTabsContainer.style.display = 'flex';

        subGroups.forEach(subName => {
            const btn = document.createElement("div");
            btn.className = `sub-tab-btn ${subName === activeSubSection ? 'active' : ''}`;
            btn.innerText = subName;
            btn.onclick = () => {
                activeSubSection = subName;
                document.querySelectorAll('.sub-tab-btn').forEach(b => b.classList.remove('active'));
                btn.classList.add('active');
                renderWorks();
            };
            subTabsContainer.appendChild(btn);
        });
    }

    function renderWorks() {
        let html = '<div class="checkbox-group">';
        const items = WORKS_DATA[activeSection][activeSubSection];

        items.forEach((item) => {
            // –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –∫–ª—é—á: –ö–∞—Ç–µ–≥–æ—Ä–∏—è|–ü–æ–¥–≥—Ä—É–ø–ø–∞|–ù–∞–∑–≤–∞–Ω–∏–µ
            const key = `${activeSection}|${activeSubSection}|${item.name}`;
            const saved = currentQuantities[key] || { qty: 0 };
            const isChecked = saved.qty > 0;
            
            html += `
            <div class="checkbox-item">
                <div class="checkbox-content">
                    <label class="checkbox-row">
                        <input type="checkbox" onchange="toggle('${key}', ${item.price}, this.checked)" ${isChecked ? 'checked' : ''}>
                        <span class="work-name">${item.name}</span>
                    </label>
                    <div class="price-note">${item.price.toLocaleString()} ‚ÇΩ / ${item.unit}</div>
                </div>
                <div class="qty-input-wrapper">
                    <input type="number" value="${saved.qty > 0 ? saved.qty : ''}" 
                           placeholder="0" step="0.1" min="0"
                           oninput="updateQty('${key}', ${item.price}, this.value)">
                    <span class="unit-label">${item.unit}</span>
                </div>
            </div>`;
        });
        html += '</div>';
        document.getElementById("works").innerHTML = html;
        calculate();
    }

    // –õ–æ–≥–∏–∫–∞ —á–µ–∫–±–æ–∫—Å–æ–≤ –∏ –≤–≤–æ–¥–∞
    window.toggle = function(key, price, checked) {
        const input = document.querySelector(`input[oninput*="'${key}'"]`);
        if(checked) {
            input.value = 1;
            currentQuantities[key] = { qty: 1, price };
        } else {
            input.value = '';
            currentQuantities[key] = { qty: 0, price };
        }
        calculate();
    }

    window.updateQty = function(key, price, val) {
        const qty = parseFloat(val);
        const checkbox = document.querySelector(`input[onchange*="'${key}'"]`);
        if(qty > 0) {
            currentQuantities[key] = { qty, price };
            checkbox.checked = true;
        } else {
            currentQuantities[key] = { qty: 0, price };
            checkbox.checked = false;
        }
        calculate();
    }

    function calculate() {
        let total = 0;
        for(let k in currentQuantities) {
            if(currentQuantities[k].qty > 0) total += currentQuantities[k].qty * currentQuantities[k].price;
        }
        document.getElementById("result").innerText = `–ò—Ç–æ–≥–æ: ${Math.round(total).toLocaleString('ru-RU')} ‚ÇΩ`;
    }

    // –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏
    window.sendData = function() {
        const packed = [];
        let totalSum = 0;

        // –ß—Ç–æ–±—ã –±–æ—Ç –ø–æ–Ω—è–ª —Å—Ç—Ä—É–∫—Ç—É—Ä—É, –º—ã –¥–æ–ª–∂–Ω—ã "–≤—ã–ø—Ä—è–º–∏—Ç—å" –≤–ª–æ–∂–µ–Ω–Ω–æ—Å—Ç—å.
        // –ú—ã –±—É–¥–µ–º –ø–µ—Ä–µ–±–∏—Ä–∞—Ç—å WORKS_DATA –≤ —Å—Ç—Ä–æ–≥–æ–º –ø–æ—Ä—è–¥–∫–µ –∏ –Ω–∞–∑–Ω–∞—á–∞—Ç—å –∏–Ω–¥–µ–∫—Å—ã.
        
        let globalSectionIdx = 0;
        
        Object.keys(WORKS_DATA).forEach((secName) => {
            let globalItemIdx = 0; // –°–∫–≤–æ–∑–Ω–æ–π –∏–Ω–¥–µ–∫—Å –≤–Ω—É—Ç—Ä–∏ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ (—Å–∫–≤–æ–∑—å –ø–æ–¥–≥—Ä—É–ø–ø—ã)
            
            Object.keys(WORKS_DATA[secName]).forEach((subName) => {
                const items = WORKS_DATA[secName][subName];
                
                items.forEach((item) => {
                    const key = `${secName}|${subName}|${item.name}`;
                    const sel = currentQuantities[key];
                    
                    if(sel && sel.qty > 0) {
                        // –î–æ–±–∞–≤–ª—è–µ–º: [–ò–Ω–¥–µ–∫—Å–ö–∞—Ç–µ–≥–æ—Ä–∏–∏, –°–∫–≤–æ–∑–Ω–æ–π–ò–Ω–¥–µ–∫—Å–¢–æ–≤–∞—Ä–∞, –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ]
                        packed.push([globalSectionIdx, globalItemIdx, sel.qty]);
                        totalSum += Math.round(sel.qty * item.price);
                    }
                    globalItemIdx++;
                });
            });
            globalSectionIdx++;
        });

        if(packed.length === 0) {
            tg.showPopup({message: "–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤—ã–±–µ—Ä–∏—Ç–µ —Ä–∞–±–æ—Ç—ã!"});
            return;
        }

        const phone = document.getElementById("phone").value;
        if(phone.length < 10) {
            tg.showPopup({message: "–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, —É–∫–∞–∂–∏—Ç–µ —Ç–µ–ª–µ—Ñ–æ–Ω!"});
            return;
        }

        const data = {
            ph: phone,
            addr: document.getElementById("address").value || "–ù–µ —É–∫–∞–∑–∞–Ω",
            ar: document.getElementById("area").value,
            rm: document.getElementById("rooms").value,
            tp: "user_calc", // –ú–µ—Ç–∫–∞, —á—Ç–æ —Ä–∞—Å—á–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π
            kt: document.getElementById("isKotedge").checked ? 1 : 0,
            tt: totalSum,
            pk: packed
        };

        tg.sendData(JSON.stringify(data));
    }

    function callMaster() {
        window.Telegram.WebApp.openTelegramLink("https://t.me/grigorii_saveliev");
    }
  </script>
</body>
</html>