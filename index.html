<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>–†–µ–º–æ–Ω—Ç –∫–≤–∞—Ä—Ç–∏—Ä ‚Äî –†–∞—Å—á—ë—Ç</title>
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
  <style>
    body { font-family: Arial, sans-serif; padding: 20px; background: #f5f5f5; }
    .card { background: white; padding: 20px; border-radius: 10px; margin: 10px 0; }
    button { background: #0088cc; color: white; border: none; padding: 12px; width: 100%; border-radius: 8px; font-size: 16px; margin-top: 15px; }
    select, input { width: 100%; padding: 10px; margin: 8px 0; border: 1px solid #ccc; border-radius: 6px; }
    #result { font-size: 18px; font-weight: bold; margin-top: 15px; color: #0088cc; }
  </style>
</head>
<body>
  <div class="card">
    <h2>üßÆ –†–∞—Å—Å—á–∏—Ç–∞–π—Ç–µ —Å—Ç–æ–∏–º–æ—Å—Ç—å —Ä–µ–º–æ–Ω—Ç–∞</h2>
    
    <label>–ü–ª–æ—â–∞–¥—å –∫–≤–∞—Ä—Ç–∏—Ä—ã (–º¬≤):</label>
    <input type="number" id="area" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: 45" min="20" max="200">

    <label>–¢–∏–ø –æ—Ç–¥–µ–ª–∫–∏ —Å—Ç–µ–Ω:</label>
    <select id="walls">
      <option value="4000">–û–±–æ–∏ (–±–∞–∑–æ–≤—ã–π)</option>
      <option value="6000">–ü–æ–∫—Ä–∞—Å–∫–∞ (–ø—Ä–µ–º–∏—É–º)</option>
      <option value="8000">–ü–ª–∏—Ç–∫–∞ + –¥–µ–∫–æ—Ä (–¥–∏–∑–∞–π–Ω–µ—Ä—Å–∫–∏–π)</option>
    </select>

    <label>–ù–∞–ø–æ–ª—å–Ω–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ:</label>
    <select id="floor">
      <option value="3000">–õ–∞–º–∏–Ω–∞—Ç</option>
      <option value="5000">–ü–ª–∏—Ç–∫–∞</option>
      <option value="9000">–ü–∞—Ä–∫–µ—Ç / –ú–∞—Å—Å–∏–≤</option>
    </select>

    <label>–°–∞–Ω—Ç–µ—Ö–Ω–∏–∫–∞:</label>
    <select id="plumbing">
      <option value="1500">–ë—é–¥–∂–µ—Ç (Rossinka, Santek)</option>
      <option value="3500">–ü—Ä–µ–º–∏—É–º (Grohe, Hansgrohe)</option>
    </select>

    <div id="result">–°—É–º–º–∞ –ø–æ—è–≤–∏—Ç—Å—è –∑–¥–µ—Å—å</div>
    <button onclick="sendData()">–û—Ç–ø—Ä–∞–≤–∏—Ç—å —Ä–∞—Å—á—ë—Ç –º–µ–Ω–µ–¥–∂–µ—Ä—É</button>
  </div>

  <script>
    function calculate() {
      const area = parseFloat(document.getElementById('area').value) || 0;
      const walls = parseFloat(document.getElementById('walls').value) || 0;
      const floor = parseFloat(document.getElementById('floor').value) || 0;
      const plumbing = parseFloat(document.getElementById('plumbing').value) || 0;

      const total = area * (walls + floor + plumbing);
      document.getElementById('result').innerText = `–ò—Ç–æ–≥–æ: ${total.toLocaleString()} ‚ÇΩ`;
      return { area, walls, floor, plumbing, total };
    }

    function sendData() {
      const data = calculate();
      if (data.area < 20) {
        alert("–£–∫–∞–∂–∏—Ç–µ –ø–ª–æ—â–∞–¥—å –æ—Ç 20 –º¬≤");
        return;
      }

      // –û—Ç–ø—Ä–∞–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö –≤ Telegram-–±–æ—Ç–∞
      const WebApp = window.Telegram.WebApp;
      WebApp.sendData(JSON.stringify(data));
      WebApp.close();
    }

    // –ü–µ—Ä–µ—Å—á—ë—Ç –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏
    document.querySelectorAll('input, select').forEach(el => {
      el.addEventListener('input', calculate);
    });
  </script>
</body>
</html>